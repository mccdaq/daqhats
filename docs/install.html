<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installing and Using the Library &mdash; MCC DAQ HAT Library 1.5.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=e0a75244"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="C Library Reference" href="c.html" />
    <link rel="prev" title="Installing the DAQ HAT board" href="hardware.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MCC DAQ HAT Library
          </a>
              <div class="version">
                1.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Hardware Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Installing the DAQ HAT board</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installing and Using the Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#firmware-updates">Firmware Updates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mcc-118">MCC 118</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-c-program">Creating a C program</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-python-program">Creating a Python program</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="c.html">C Library Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python Library Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MCC DAQ HAT Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installing and Using the Library</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/install.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installing-and-using-the-library">
<h1>Installing and Using the Library<a class="headerlink" href="#installing-and-using-the-library" title="Link to this heading"></a></h1>
<p>The project is hosted at <a class="reference external" href="https://github.com/mccdaq/daqhats">https://github.com/mccdaq/daqhats</a>.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Power off the Raspberry Pi then attach one or more HAT boards (see <a class="reference internal" href="hardware.html#install"><span class="std std-ref">Installing the DAQ HAT board</span></a>).</p></li>
<li><p>Power on the Pi and log in.  Open a terminal window if using the graphical interface.</p></li>
<li><p>Update your package list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span>
</pre></div>
</div>
</li>
<li><p><strong>Optional:</strong> Update your installed packages and reboot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">full</span><span class="o">-</span><span class="n">upgrade</span>
<span class="n">sudo</span> <span class="n">reboot</span>
</pre></div>
</div>
</li>
<li><p>Install git (if not installed):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Download this package to your user folder with git:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mccdaq</span><span class="o">/</span><span class="n">daqhats</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>Build and install the shared library and tools.  The installer will detect the HAT board EEPROMs and save the contents if needed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">daqhats</span>
<span class="n">sudo</span> <span class="o">./</span><span class="n">install</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</li>
<li><p>To use the daqhats library with Python install the python library. It may be installed system-wide with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">daqhats</span>
</pre></div>
</div>
<p>Recent versions of Python discourage system-wide installation, so you may have to append <cite>–break-system-packages</cite>.
To install in a virtual environment (venv), create the venv and install the package (replace <cite>&lt;path_to_venv&gt;</cite> with the
desired location of the venv):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="o">&lt;</span><span class="n">path_to_venv</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">path_to_venv</span><span class="o">&gt;/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pip</span> <span class="n">install</span> <span class="n">daqhats</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>Note:</strong> If you encounter any errors during steps 5 - 7 then uininstall the daqhats
library (if installed), go back to step 4, update your installed packages and reboot,
then repeat steps 5 - 7.</p>
<p>if ioctl errors are seen when running on a Raspberry Pi 5, update the kernel with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">rpi</span><span class="o">-</span><span class="n">update</span>
</pre></div>
</div>
<p>You can now run the example programs under ~/daqhats/examples and create your own programs.</p>
<p>If you are using the Raspberry Pi OS desktop interface, the DAQ HAT Manager utility will be
available under the Accessories start menu. This utility will allow you to list the
detected DAQ HATs, update the EEPROM files if you change your board stack, and launch
control applications for each DAQ HAT to perform simple operations. The code for these
programs is in the daqhats/tools/applications directory.</p>
<p>You may display a list of the detected boards at any time with the DAQ HAT Manager or
the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">daqhats_list_boards</span>
</pre></div>
</div>
<p>If you change your board stackup and have more than one HAT board attached you must
update the saved EEPROM images for the library to have the correct board information.
You can use the DAQ HAT Manager or the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">daqhats_read_eeproms</span>
</pre></div>
</div>
<p>To display the installed daqhats version use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">daqhats_version</span>
</pre></div>
</div>
<p>To uninstall the package use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">daqhats</span>
<span class="n">sudo</span> <span class="o">./</span><span class="n">uninstall</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</section>
<section id="firmware-updates">
<h2>Firmware Updates<a class="headerlink" href="#firmware-updates" title="Link to this heading"></a></h2>
<section id="mcc-118">
<h3>MCC 118<a class="headerlink" href="#mcc-118" title="Link to this heading"></a></h3>
<p>Use the firmware update tool to update the firmware on your MCC 118 board(s).
The “0” in the example below is the board address. Repeat the command for each
MCC 118 address in your board stack. This example demonstrates how to update the
firmware on the MCC 118 that is installed at address 0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mcc118_firmware_update</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">daqhats</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">MCC_118</span><span class="o">.</span><span class="n">hex</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-a-c-program">
<h2>Creating a C program<a class="headerlink" href="#creating-a-c-program" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The daqhats headers are installed in /usr/local/include/daqhats.  Add the compiler option <code class="code docutils literal notranslate"><span class="pre">-I/usr/local/include</span></code> in order to find the header files when compiling, and the include line <code class="code docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;daqhats/daqhats.h&gt;</span></code> to your source code.</p></li>
<li><p>The shared library, libdaqhats.so, is installed in /usr/local/lib.  Add the linker option <code class="code docutils literal notranslate"><span class="pre">-ldaqhats</span></code> to include this library.</p></li>
<li><p>Study the example programs, example makefile, and library documentation for more information.</p></li>
</ul>
</section>
<section id="creating-a-python-program">
<h2>Creating a Python program<a class="headerlink" href="#creating-a-python-program" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The Python package is named <em>daqhats</em>.  Use it in your code with <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">daqhats</span></code>.</p></li>
<li><p>Study the example programs and library documentation for more information.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hardware.html" class="btn btn-neutral float-left" title="Installing the DAQ HAT board" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="c.html" class="btn btn-neutral float-right" title="C Library Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Measurement Computing.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>